翻译和解答[https://github.com/bregman-arie/devops-exercises/blob/master/README.md](https://github.com/bregman-arie/devops-exercises/blob/master/README.md)

***

## DevOps

#### 什么是DevOps？

**Amazon:**

"DevOps是文化理念，实践和工具的结合，可提高组织高速交付应用程序和服务的能力: 与使用传统软件开发和基础架构管理流程的组织相比，以更快的速度发展和改进产品。这种速度使组织可以更好地为客户提供服务，并在市场上更有效地竞争。"

**Microsoft:**

"DevOps是人员，流程和产品的结合，可以为我们的最终用户持续交付价值。“Dev”和“Ops”的收缩是指取代孤立的开发和运营来创建多学科的团队，这些团队现在可以与共享的高效实践和工具一起工作。DevOps的基本实践包括敏捷计划，持续集成，持续交付以及对应用程序的监视。"

**Red Hat:**

"DevOps描述了加速想法(例如新软件功能，增强功能请求或错误修复)从开发到在生产环境中进行部署的过程的方法，该过程可以为用户提供价值。这些方法要求开发团队和运维团队经常沟通，并以同情他人的态度对待他们的工作。可伸缩性和灵活的配置也是必要的。借助DevOps，那些最需要电源的人可以通过自助服务和自动化来获得电源。通常在标准开发环境中进行编码的开发人员会与IT运营紧密合作，以在不牺牲可靠性的情况下加快软件的构建，测试和发布的速度。"

**Google:**

"DevOps旨在提高软件交付速度，提高服务可靠性并在软件利益相关者之间建立共享所有权的组织和文化运动。"

***

#### DevOps有什么好处？有什么可以帮助我们实现？

* 合作
* 改善交付
* 提高安全性
* 加快速度
* 快速扩容
* 提高可靠性

***

#### DevOps的反模式是什么？

* 一个人负责不同的任务。例如，只有一个人可以将其他人的代码合并到存储库中
* 将生产与开发环境区别对待。例如，在开发环境中不实施安全性
* 不允许某人在周五开始发布

***

#### 什么是持续集成？

开发人员经常将代码集成到共享存储库中的一种开发实践。它的范围可以从每天或每周进行几次更改，到大规模在一个小时内进行几次更改。

验证每段代码（更改/补丁），以使更改可以安全地合并。如今，使用自动构建来测试更改以确保代码可以集成是一种常见的做法。它可以是一个运行在不同级别（单元，功能等）的多个测试的构建，也可以是所有或某些必须通过以将更改合并到存储库中的多个单独的构建。

***

#### 您能否描述从开发人员向存储库提交更改/ PR开始的CI（和/或CD）流程示例？

由于配置项流程根据所使用的技术和向其提交更改的项目的类型而异，因此对于此问题有很多答案。此类过程可以包括以下一个或多个阶段：

* 编译
* 构建
* 安装
* 配置
* 更新
* 测试

举例：

开发人员向项目提交了拉取请求。 PR（拉动请求）触发了两个作业（或一个合并的作业）。 一项工作是对变更运行lint测试，另一项任务是构建包含提交的变更的程序包，并运行多个api。

一个完整的不同CI流程可以描述开发人员如何将代码推送到存储库，然后触发工作流以构建容器映像并将其推送到注册表。进入注册表后，k8s集群将应用新更改。

***

#### 什么是持续部署？

开发人员用于将软件自动发布到生产中的开发策略，其中任何代码提交都必须通过自动化测试阶段。仅当成功时，该发行才被认为是有价值的。这消除了任何人为干预，只有在设置了生产就绪管道并实时监视和报告已部署资产后才应实施。如果在生产中发现任何问题，则应该很容易回滚到以前的工作状态。[更多内容](https://www.atlassian.com/continuous-delivery/continuous-deployment)

***

#### 什么是持续交付？

一种开发策略，通常用于将代码交付给QA和Ops进行测试。这需要具有一个具有与生产类似的功能的登台区域，在该区域中，只有经过人工检查才能接受生产的更改。由于这种人为纠缠，与连续部署相比，发布和复审之间通常存在时间滞后，使其变得更慢且更容易出错。

[更多内容](https://www.atlassian.com/continuous-delivery/continuous-deployment)

***

#### 您希望使用“配置->部署”模型还是“部署->配置”模型？为什么？

两者都有优点和缺点。例如，在“配置->部署”模型中，您构建一个映像以供多个部署使用，因此部署之间彼此不同的机会就更少了，因此它具有一致环境的明显优势。

***

#### 您熟悉哪些CI / CD最佳实践？或您认为什么是CI / CD最佳实践？

* 构建，测试和部署软件的自动化过程
* 经常提交和测试
* 测试环境应该是生产环境的克隆

***

#### 您在哪里存储CI / CD管道？为什么？

关于在哪里存储CI / CD管道定义，有多种方法：

* 应用程序存储库-将它们存储在正在构建或测试的应用程序的相同存储库中
* 中央存储库-将所有组织/项目的CI / CD管道存储在一个单独的存储库中
* 每个应用程序回购的CI回购-将与CI相关的代码与应用程序代码分开，但您并未将所有内容都放在一个地方

***

#### 您在以下领域/任务中使用什么系统和/或工具？为什么？

- **CI/CD - Jenkins, Circle CI, Travis, Drone, Argo CD, Zuul**
- **Provisioning infrastructure - Terraform, CloudFormation**
- **Configuration Management - Ansible, Puppet, Chef**
- **Monitoring & alerting - Prometheus, Nagios, zabbix, open-falcon**
- **Logging - Logstash, Graylog, Fluentd**
- **Code review - Gerrit, Review Board**
- **Code coverage - Cobertura, Clover, JaCoCo**
- **Issue tracking - Jira, Bugzilla**
- **Containers and Containers Orchestration - Docker, Podman, Kubernetes, Nomad**
- **Tests - Robot, Serenity, Gauge**

***

#### 选择工具/技术时要考虑什么？

在您的答案中，您可以提及以下一项或多项：

* 成熟/稳定与尖端 
* 社区规模
* 体系结构方面-代理与无代理，主控与无主控等 
* 学习曲线

***

#### 解释可变基础架构与不变基础架构

在可变的基础架构范例中，更改是在现有基础架构之上应用的，随着时间的推移，基础架构会建立更改历史记录。Ansible，Puppet和Chef是遵循可变基础架构范例的工具示例。

在不变的基础架构范例中，每项更改实际上都是一个新的基础架构。因此，对服务器的更改将导致新服务器而不是对其进行更新。Terraform是遵循不变基础架构范例的技术示例。

***

#### 解释“软件发行”

[https://venam.nixers.net/blog/unix/2020/03/29/distro-pkgs.html](https://venam.nixers.net/blog/unix/2020/03/29/distro-pkgs.html)

摘自文章：“因此，软件发行是关于机制和社区的责任和决定，以负担和决策来构建可交付的相干软件的组合。”

***

#### 为什么会有多个软件发行版？他们可以有什么区别？

不同的发行版可以关注不同的事物，例如：关注不同的环境（服务器，移动，桌面），支持特定的硬件，专门研究不同的领域（安全性，多媒体等）等。基本上，该软件的不同方面及其支持的功能在每个发行版中都有不同的优先级。

***

#### 什么是软件存储库？

维基百科：“软件存储库，或简称为“ repo”，是软件包的存储位置。通常会存储目录以及元数据。

***

#### 有哪些发行软件的方式？每种方法的优缺点是什么？

* Source - 在版本控制系统中维护构建脚本，以便用户在克隆存储库后可以构建您的应用程序。优点：用户可以快速签出不同版本的应用程序。缺点：需要在用户机器上安装构建工具。
* Archive - 将您所有的应用文件收集到一个存档中（例如tar），并将其交付给用户。优点：用户将所需的一切收集在一个文件中。缺点：更新时需要重复相同的过程，如果有很多依赖项，则不好。
* Package - 根据操作系统的不同，您可以使用OS软件包格式（例如，在RHEL / Fefodra中为RPM）来交付软件，并使用标准打包程序命令来安装，卸载和更新它。优点：程序包管理器负责支持安装，卸载，更新和依赖项管理。缺点：需要管理软件包存储库。
* Images - VM或容器映像，其中包已包含在其中，以便成功运行。优点：一切都是预装的，具有高度的环境隔离性。缺点：需要有关构建和优化图像的知识。

***

#### 您是否熟悉“大教堂和集市模型”？解释每个模型

* Cathedral - 发布软件时发布的源代码
* Bazaar - 源代码始终是公开可用的（例如Linux内核）

***

#### 什么是缓存？如何运作？它为什么如此重要？

缓存是对频繁使用的资源的快速访问，这些资源在计算上很昂贵或IO密集并且不经常更改。从CPU缓存到分布式缓存系统，可以存在几层缓存。常见的是内存缓存和分布式缓存。 <br/>缓存通常是包含某些数据的数据结构，例如哈希表或字典。但是，任何数据结构都可以提供缓存功能，例如集合，排序集合，排序字典等。虽然缓存在许多应用程序中使用，但是如果实施不正确或使用不当，它们可能会产生细微的错误。例如，缓存失效，过期或更新通常是非常困难且困难的。

***

#### 解释有状态和无状态

* 无状态应用程序不会在主机中存储任何数据，因此非常适合于水平扩展和微服务。
* 有状态应用程序依赖于存储来保存状态和数据，通常数据库是有状态应用程序。

***

#### 什么是可靠性？它如何适合DevOps？

在DevOps上下文中使用时，可靠性是系统从基础架构故障或中断中恢复的能力。它的一部分还能够根据您的组织或团队的需求进行扩展。

***

#### “可用性”是什么意思？有什么方法可以跟踪服务的可用性？



***

#### 描述设置某种类型的Web服务器（Nginx，Apache，IIS，Tomcat等）的工作流程



***

#### Web服务器如何工作？



***

#### 说明“开源”



***

#### 请描述您设计和/或实现的service / app / project / ...的体系结构



***

#### 您熟悉哪些类型的测试

样式，单元，功能，API，集成，冒烟，场景，

您应该能够解释您提到的内容。

***

#### 您需要在不同的操作系统（Ubuntu，RHEL等）上定期安装一个软件包（除非它已经存在）。你会怎么做？

有多种方法可以回答这个问题（这里没有对与错）：

* 简单的cron job
* 具有配置管理技术（例如Puppet，Ansible，Chef等）的管道...

***

#### 什么是混沌工程？

[https://en.wikipedia.org/wiki/Chaos_engineering](https://en.wikipedia.org/wiki/Chaos_engineering)

***

#### 什么是错误预算？



***

#### 什么是MTTF（平均故障时间）和MTTR（平均维修时间）？这些指标可帮助我们评估什么？

* MTTF（平均故障时间）正常运行时间，可以定义为系统在出现故障之前运行多长时间。
* MTTR（平均恢复时间）是修复系统所花费的时间。
* MTBF（故障之间的平均时间）产品在操作使用或测试期间的平均连续无故障时间，需要注意的是，这里探讨的MTBF并非一个实测值，而是在产品设计阶段[工程师](https://zh.wikipedia.org/wiki/工程师)依据理论所估算出的参考值[[1\]](https://zh.wikipedia.org/wiki/平均故障間隔#cite_note-1)。使用平均故障间隔时，一般假设故障的系统可以立刻修复。

***

#### 什么是“基础架构即代码”？您熟悉IAC的什么实现？

IAC（基础结构即代码）是一种定义系统基础结构或体系结构的决定性方法。一些实现是适用于Azure和Terraform的ARM模板，可以跨多个云提供商使用。

***

#### 您如何管理构建工件？

构建工件通常存储在存储库中。它们可以在发布管道中用于部署目的。通常，构建工件上有保留期。

***

#### 您正在使用/首选哪种持续集成解决方案，为什么？



***

#### 您熟悉或使用了哪些部署策略？

* 滚动更新
* 蓝绿部署
* 金丝雀部署
* 重新制定策略

***

#### 您加入了一个团队，每个人都在开发一个项目，实践是在测试工作站上本地运行测试，如果测试通过，则将其推送到存储库。目前的流程有什么问题，以及如何对其进行改进？



***

#### 解释测试驱动开发（TDD）



***

#### 解释敏捷软件开发



***

#### 您如何看待以下句子？：“实施或实践DevOps会导致软件更加安全”



***

#### 您知道什么是“post-mortem meeting”吗？您对此有何看法？



***

#### 您如何为CI / CD资源执行计划容量？ （例如服务器，存储设备等）



***

#### 您如何为依赖于其他几个应用程序的应用程序构建/实现CD？



***

#### 您如何衡量CI / CD的质量？您是否使用任何度量标准或KPI来衡量质量？



***

#### 什么是配置漂移？它引起什么问题？

当在具有完全相同的配置和软件的服务器环境中，某台或多台特定服务器正在应用其他服务器无法获得的更新或配置，并且随着时间的推移，这些服务器与所有其他服务器略有不同时，就会发生配置漂移。

这种情况可能会导致难以识别和重现的错误。

***

#### 如何应对配置漂移？

使用期望的状态配置（DSC）实现可以避免配置漂移。所需状态配置可以是一个声明性文件，用于定义系统的状态。有一些工具可以强制执行所需的状态，例如地形或天蓝色的dsc。有增量策略或完整策略。

***

#### 您是否有测试跨项目变更的经验？ （又称交叉依赖）

注意：交叉依赖是指您对单独的项目进行了两个或更多更改，并且您希望在相互构建中对其进行测试，而不是分别测试每个更改。

***

#### 您是否为开源项目做出了贡献？告诉我这种经历



***

### SRE

#### SRE和DevOps有什么区别？



***

#### 什么是SRE团队负责？

可以争论是按公司定义还是全球定义，但至少根据大公司（例如Google）而言，SRE团队负责其服务的可用性，延迟，性能，效率，变更管理，监视，紧急响应和容量规划。

***



